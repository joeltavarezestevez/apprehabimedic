<div class='content-wrapper' ng-init="app.settings.pagetitle = 'Registrar Doctor';">
    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
        <ol class="breadcrumb well">
            <li>
                <a ui-sref="app.inicio"><i class="fa fa-home"></i>Inicio</a>
            </li>
            <li>
                <a ui-sref="app.doctores">Doctores</a>
            </li>
            <li class="active">
                <strong>Registrar doctor</strong>
            </li>
        </ol>
        <div class="alert ng-isolate-scope alert-danger alert-dismissible" ng-class="['alert-' + (type || 'warning'), closeable ? 'alert-dismissible' : null]" role="alert" type="danger minimal" ng-hide="!alert">
            <button type="button" class="close" ng-click="closeAlert()">
                <span aria-hidden="true">×</span>
                <span class="sr-only">Close</span>
            </button>
            <div>
                <span class="ng-binding ng-scope">
                    Errores al crear el registro:
                    <li class="danger" ng-repeat="mensaje in mensajes">{{mensaje}}.</li>
                </span>
            </div>
        </div>        
        <form id="general_validate" action="javascript:;" name="form" class="form-validation ng-invalid ng-invalid-required ng-valid-email ng-valid-url ng-valid-pattern ng-valid-blacklist ng-valid-minlength ng-valid-maxlength ng-invalid-validator ng-invalid-b ng-invalid-a ng-dirty ng-valid-parse">
            <section class="box">
                <header class="panel_header">
                    <h2 class="title pull-left">Información General</h2>
                    <div class="actions panel_actions pull-right">
                        <i class="box_toggle material-icons">expand_more</i>
                    </div>
                </header>
                <div class="content-body padding-bottom-0">
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="persona_nombres">Nombres <span class="text-danger">*</span></label>
                                <span class="desc">Escriba los nombres del doctor</span>
                                <div class="controls">
                                    <input type="text" class="form-control" placeholder="Nombres del Doctor" id="doctor_nombres" name="doctor_nombres" ng-model="doctor.persona_nombres" required>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="doctor_apellidos">Apellidos <span class="text-danger">*</span></label>
                                <span class="desc">Escriba los apellidos del doctor</span>
                                <div class="controls">
                                    <input type="text" class="form-control" placeholder="Apellidos del Doctor" id="doctor_apellidos" name="doctor_apellidos" ng-model="doctor.persona_apellidos" required>
                                </div>
                            </div>                        
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" ng-controller="DatepickerDemoCtrl">
                                <label class="form-label" for="persona_fecha_nacimiento">Fecha de Nacimiento <span class="text-danger">*</span></label>
                                <span class="desc">Seleccione la fecha de nacimiento</span>
                                <div class="input-group" inputgroup>
                                    <input type="date" class="form-control datepicker" uib-datepicker-popup is-open="dtpick.opened2" min-date="'1900-01-01'" max-date="dt" datepicker-options="dateOptions" ng-required="true" id="doctor_fecha_nacimiento" ng-model="doctor.persona_fecha_nacimiento" current-text="Hoy" clear-text="Limpiar" close-text="Cerrar">
                                    <span class="input-group-addon" ng-click="open($event,'opened2')"><i class="fa fa-calendar" style="color: #000;"></i></span>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">                            
                                <label class="form-label" for="field-1">Lugar de Nacimiento <span class="text-danger">*</span></label>
                                <span class="desc">Seleccione el lugar de nacimiento</span>
                                <div class="controls">
                                    <select ui-jq="chosen" class="form-control" ng-model="doctor.pais_id" required>
                                        <option value="">Seleccione el pais</option>
                                        <option ng-repeat="pais in paises" value="{{pais.id}}">{{pais.pais_nombre}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">                                                      
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">                            
                                <label class="form-label" for="field-1">Especialidad <span class="text-danger">*</span></label>
                                <span class="desc">Seleccione la especialidad del doctor</span>
                                <div class="controls">
                                    <select ui-jq="chosen" class="form-control" ng-model="doctor.especialidad_id" required>
                                        <option value="">Seleccione la especialidad</option>
                                        <option ng-repeat="especialidad in especialidades" value="{{especialidad.id}}">{{especialidad.especialidad_nombre}}</option>
                                    </select>
                                </div>
                            </div> 
                            <div class="col-lg-6 col-md-6 col-sm-5 col-xs-12">
                                <label class="form-label" for="field-1">Tipo de sangre <span class="text-danger">*</span></label>
                                <span class="desc"></span>
                                <div class="controls">
                                    <select ui-jq="chosen" class="form-control" ng-model="doctor.grupo_sanguineo_id" required>
                                        <option value="">Seleccione tipo de sangre</option>
                                        <option ng-repeat="grupo_sanguineo in grupos_sanguineos" value="{{grupo_sanguineo.id}}">{{grupo_sanguineo.grupo_sanguineo_nombre}}</option>                                    
                                    </select>
                                </div>                                
                            </div>                            
                        </div>                        
                    </div>  
                    <br>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="field-5">Estado Civil <span class="text-danger">*</span></label>
                                <span class="desc">Elija el estado civil del paciente</span>
                                <div class="radio" ng-repeat="estado_civil in estados_civiles">
                                    <label class="icheck icheck-info">
                                        <input type="radio" name="estado_civil" value="{{estado_civil.id}}" ng-model="doctor.estado_civil_id" required>
                                        <i></i> {{estado_civil.estado_civil_nombre}}
                                    </label>
                                </div>                                          
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="field-5">Sexo <span class="text-danger">*</span></label>
                                <span class="desc">Elija el sexo del paciente</span>
                                <div class="radio" ng-repeat="sexo in sexos">
                                    <label class="icheck icheck-primary">
                                        <input type="radio" name="sexo" value="{{sexo.id}}" ng-model="doctor.sexo_id" required>
                                        <i></i> {{sexo.sexo_nombre}}
                                    </label>
                                </div>
                            </div>                                               
                        </div>
                    </div>                    
                    <br>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label class="form-label" for="field-5">Imagen de perfil</label>
                                <span class="desc">Elija una imagen de su PC o tome una imagen desde la c&aacute;mara</span>
                                <div class="alert alert-error ng-scope" ng-show="webcamError" style="">
                                    <span>Webcam could not be started. Did you give access to it?</span>
                                </div>
                                <br>
                                <webcam ng-if="!doctor.persona_imagen_perfil" channel="channel" 
                                        on-streaming="onSuccess()" 
                                        on-error="onError(err)" 
                                        on-stream="onStream(stream)" 
                                        class="img-responsive">
                                </webcam>
                                <div ng-if="doctor.persona_imagen_perfil">&nbsp;</div>
                                <img ng-if="doctor.persona_imagen_perfil" src="{{doctor.persona_imagen_perfil}}" width="320" class="img-responsive">
                                <canvas style="display: none" id="snapshot"></canvas>
                                <input class="ng-hide" type="file" id="trigger" onchange="angular.element(this).scope().setImage(this)" accept="image/*">
                                <div class="row btn-iconic margin-left-30">
                                    <button ng-if="!paciente.persona_imagen_perfil" type="button" class="btn btn-primary" ng-click="makeSnapshot()">
                                        <i class="fa fa-camera"></i>
                                    </button>
                                    <button ng-if="!doctor.persona_imagen_perfil" type="button" class="btn btn-info" onclick="openWindow()">
                                        <i class="fa fa-image"></i>
                                    </button>
                                    <button type="button" class="btn btn-danger" ng-click="clearImage()">
                                        <i class="fa fa-close"></i>
                                    </button>                                            
                                </div>                                
                            </div>                        
                        </div>
                    </div>
                </div>
            </section>
            <section class="box">
                <header class="panel_header">
                    <h2 class="title pull-left">Datos de Contacto</h2>
                    <div class="actions panel_actions pull-right">
                        <i class="box_toggle material-icons">expand_more</i>
                    </div>
                </header>
                <div class="content-body padding-bottom-0">
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label class="form-label" for="doctor_correo_electronico">Correo Electr&oacute;nico</label>
                                <span class="desc">Ej. joseperez@rehabimedic.com, etc.</span>
                                <div class="controls">
                                    <input type="text" class="form-control ng-pristine ng-valid-email ng-invalid ng-invalid-required ng-touched" id="doctor_correo_electronico" placeholder="ejemplo@example.com" ng-model="doctor.persona_correo_electronico">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="doctor_telefono">Tel&eacute;fono <span class="text-danger">*</span></label>
                                <span class="desc">Ej. (999) 999-9999, etc.</span>
                                <div class="controls">
                                    <input id="doctor_telefono" name="doctor_telefono" type="text" class="form-control" ui-mask="999-999-9999" placeholder="___-___-____"  model-view-value="true" ng-model="doctor.persona_telefono" required>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="doctor_celular">Celular</label>
                                <span class="desc">Ej. (999) 999-9999, etc.</span>
                                <div class="controls">
                                    <input id="doctor_celular" name="doctor_celular" type="text" class="form-control" ui-mask="999-999-9999" placeholder="___-___-____" ng-model="doctor.persona_celular">
                                </div>
                            </div>                        
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label class="form-label" for="doctor_direccion">Dirección <span class="text-danger">*</span></label>
                                <span class="desc">Ej. Calle 26, #46, Los Prados, Santiago, etc.</span>
                                <div class="controls">
                                    <textarea class="form-control" cols="3" id="doctor_direccion" name="doctor_direccion" ng-model="doctor.persona_direccion" required></textarea>
                                </div>
                            </div>
                        </div>
                    </div>                      
                </div>
            </section>
            <section class="box">
                <header class="panel_header">
                    <h2 class="title pull-left">Contacto de Emergencia</h2>
                    <div class="actions panel_actions pull-right">
                        <i class="box_toggle material-icons">expand_more</i>
                    </div>
                </header>
                <div class="content-body padding-bottom-0">
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="persona_contacto_nombre">Nombre de la persona <span class="text-danger">*</span></label>
                                <span class="desc">Persona a contactar en caso de emergencia</span>
                                <div class="controls">
                                    <input type="text" class="form-control" id="persona_contacto_nombre" placeholder="Nombre de la persona" ng-model="doctor.contacto_nombre" required>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="persona_contacto_telefono">Tel&eacute;fono de la persona <span class="text-danger">*</span></label>
                                <span class="desc">Ej. (999) 999-9999, etc.</span>
                                <div class="controls">
                                    <input id="persona_contacto_telefono" name="persona_contacto_telefono" type="text" class="form-control" ui-mask="999-999-9999" placeholder="___-___-____"  model-view-value="true" ng-model="doctor.contacto_telefono" required>                    
                                </div>
                            </div>                      
                        </div>
                    </div>
                    <br>
                </div>
            </section>            
            <section class="box">
                <header class="panel_header">
                    <h2 class="title pull-left">Datos de la Cuenta de Usuario</h2>
                    <div class="actions panel_actions pull-right">
                        <i class="box_toggle material-icons">expand_more</i>
                    </div>
                </header>
                <div class="content-body padding-bottom-0">
                    <div class="row">
                        <div class="form-group">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label class="form-label" for="field-5">Tiene Usuario? <span class="text-danger">*</span></label>
                                <span class="desc"></span>
                                <div class="radio">
                                    <label class="icheck icheck-primary">
                                        <input type="radio" name="doctor_usuario" value="1" ng-model="doctor.usuario" required>
                                        <i></i> Si
                                    </label>
                                </div>
                                <div class="radio">
                                    <label class="icheck icheck-danger">
                                        <input type="radio" name="doctor_usuario" value="2" ng-model="doctor.usuario" checked="checked">
                                        <i></i> No
                                    </label>
                                </div>                                
                            </div>                                 
                        </div>                               
                    </div>
                    <br>
                    <div class="row" ng-if="doctor.usuario == 1">
                        <div class="form-group">
                            <div class="col-lg-8 col-md-8 col-sm-9 col-xs-12">
                                <label class="form-label" for="doctor_nombre_usuario">Usuario <span class="text-danger">*</span></label>
                                <span class="desc">Escriba el nombre de usuario</span>
                                <div class="controls">
                                    <input type="text" class="form-control" id="doctor_nombre_usuario" name="doctor_nombre_usuario" ng-model="doctor.usuario_nombre">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>                    
                    <div class="row" ng-if="doctor.usuario == 1">
                        <div class="form-group">
                            <div class="col-lg-8 col-md-8 col-sm-9 col-xs-12">
                                <label class="form-label" for="doctor_contrasena">Contrase&ntilde;a <span class="text-danger">*</span></label>
                                <span class="desc">Escriba su contrase&ntilde;a</span>
                                <div class="controls">
                                    <input type="password" class="form-control" id="doctor_contrasena" name="doctor_contrasena" ng-model="doctor.usuario_contrasena">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row" ng-if="doctor.usuario == 1">
                        <div class="form-group">
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <label class="form-label" for="doctor_confirmar_contrasena">Confirmar Contrase&ntilde;a <span class="text-danger">*</span></label>
                                <span class="desc">Escriba de nuevo su contrase&ntilde;a</span>
                                <div class="controls">
                                    <input type="password" class="form-control" id="doctor_confirmar_contrasena" name="doctor_confirmar_contrasena" placeholder="Confirme su contrase&ntilde;a" ng-model="doctor.usuario_confirmar_contrasena">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row" ng-if="doctor.usuario == 1">
                        <div class="form-group">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <label class="form-label" for="field-1">Perfil de Usuario <span class="text-danger">*</span></label>
                                <span class="desc">Seleccione el tipo de usuario</span>
                                <div class="controls">
                                    <select ui-jq="chosen" class="form-control" ng-model="doctor.perfil_usuario_id">
                                        <option value="">Seleccione el perfil del usuario</option>
                                        <option ng-repeat="perfilUsuario in perfilesUsuarios" value="{{perfilUsuario.id}}">{{perfilUsuario.perfil_usuario_nombre}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                </div>
            </section>
            <div class="row text-center">
                <div class="form-group">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <button type="submit" class="btn btn-lg btn-primary" ng-disabled='form.$invalid' ng-click="save()"> Guardar </button>
                        <button type="button" class="btn btn-lg btn-danger" ng-click="back()"> Cancelar </button>
                    </div>
                </div>
            </div>
        </form>            
    </div>
</div>